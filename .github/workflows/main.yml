# name: Deploy to Production

# on:
#   push:
#     branches:
#       - main

# jobs:
#   deploy:
#     runs-on: ubuntu-latest

#     steps:
#       - name: Checkout code
#         uses: actions/checkout@v3

#       - name: Set up Node.js
#         uses: actions/setup-node@v3
#         with:
#           node-version: 20

#       - name: Install dependencies
#         run: npm install

#       - name: Deploy via rsync
#         env:
#           SSH_PRIVATE_KEY: ${{ secrets.SSH_PRIVATE_KEY }}
#         run: |
#           mkdir -p ~/.ssh
#           echo "$SSH_PRIVATE_KEY" > ~/.ssh/id_rsa
#           chmod 600 ~/.ssh/id_rsa
#           ssh  -i ~/.ssh/id_rsa -o StrictHostKeyChecking=no clipcast@thewhiteroom.com "find ~/public_html/assets/ -iregex '.*\.\(js\|br\|css\|gif\|gz\|svg\|json\|LICENSE\)$' -type f -mtime +1 -delete";
#           rsync -azv --exclude-from .rsync_exclusions "ssh -i ~/.ssh/id_rsa -o StrictHostKeyChecking=no" ./* clipcast@thewhiteroom.com:;
